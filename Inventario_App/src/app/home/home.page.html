<ion-header>
  <ion-toolbar>
    <ion-title>Inicio</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <!-- Encabezado de bienvenida -->
  <div class="home-header">
    <h2>Hola, {{ usuario }} ðŸ‘‹</h2>
    <p class="home-subtitle">
      Gestiona el inventario de tus bodegas escaneando, registrando productos
      y manteniendo todo sincronizado.
    </p>
  </div>

  <!-- Acciones principales -->
  <ion-card class="home-actions">
    <ion-card-header>
      <ion-card-title>Acciones rÃ¡pidas</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="actions-grid">
        <ion-button expand="block" shape="round" (click)="goScan()">
          <ion-icon slot="start" name="qr-code-outline"></ion-icon>
          Escanear estante (QR)
        </ion-button>

        <ion-button expand="block" shape="round" color="secondary" (click)="goAddProduct()">
          <ion-icon slot="start" name="cube-outline"></ion-icon>
          Agregar producto
        </ion-button>

        <ion-button expand="block" shape="round" fill="outline" (click)="goSearchProduct()">
          <ion-icon slot="start" name="search-outline"></ion-icon>
          Buscar producto
        </ion-button>

        <ion-button expand="block" shape="round" fill="clear" (click)="syncInventario()">
          <ion-icon slot="start" name="sync-outline"></ion-icon>
          Sincronizar inventario
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- SecciÃ³n bodegas -->
  <section class="home-section">
    <div class="home-section-header">
      <h3>Bodegas disponibles</h3>
      <ion-button size="small" fill="clear" (click)="loadWarehouses()">
        <ion-icon slot="start" name="sync-outline"></ion-icon>
        Actualizar
      </ion-button>
    </div>

    <!-- Estado de carga -->
    <div *ngIf="isLoadingWarehouses" class="loading-state">
      <ion-spinner name="lines"></ion-spinner>
      <p>Cargando bodegas...</p>
    </div>

    <!-- Lista de bodegas -->
    <ng-container *ngIf="!isLoadingWarehouses">
      <ion-card *ngIf="!warehouses.length">
        <ion-card-content>
          AÃºn no hay bodegas registradas en el sistema.
        </ion-card-content>
      </ion-card>

      <ion-list *ngIf="warehouses.length" class="warehouses-list">
        <ion-item
          *ngFor="let wh of warehouses"
          lines="none"
          class="warehouse-item"
        >
          <ion-icon slot="start" name="business-outline"></ion-icon>
          <ion-label>
            <h2>{{ wh.name }}</h2>
            <p class="code">{{ wh.code }}</p>
            <p *ngIf="wh.address" class="address">{{ wh.address }}</p>
            <p *ngIf="wh.comments" class="comments">{{ wh.comments }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ng-container>
  </section>

  <!-- Toast -->
  <ion-toast
    [isOpen]="isToastOpen"
    [message]="toastMessage"
    [duration]="1800"
    color="medium"
    position="bottom"
    (didDismiss)="isToastOpen = false">
  </ion-toast>

</ion-content>
